# R-Tree by 11-006 Team

[![CMake](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml/badge.svg)](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml)

- _Реализация R-дерева_
- _Представляет собой дерево поиска, R- дерево повсеместно используется в географических данных_
- _Основные операции - вставка (insert), поиск (search), удаление (remove)_
- _*Сложность операций:*_ 
- _Вставка - O(log n), где  n - количество node;_
- _Поиск - O(log m(n)), где m - минимальное количество детей у одной node;_
- _Удаление - O(log m(n))._

## Команда "AEC"

| Фамилия Имя   | Вклад (%) | Прозвище              |
| :---          |   ---:    |  ---:                 |
| Валеев Тагир   | 50        |  _Valtage_               |
| Непогожев Даниил   | 50        |  _Overlord_ |

**Девиз команды**
> _R-Tree семестровка - да здравствует допка!_

## Структура проекта

Проект состоит из следующих частей:

- [`src`](src)/[`include`](include) - реализация структуры данных (исходный код и заголовочные файлы);
- [`benchmark`](benchmark) - контрольные тесты производительности структуры данных (операции добавления, удаления,
  поиска и пр.);
- [`examples`](examples) - примеры работы со структурой данных;
- [`dataset`](dataset) - наборы данных для запуска контрольных тестов и их генерация;

## Требования (Prerequisites)

Рекомендуемые требования:

1. С++ компилятор c поддержкой стандарта C++17 (например, _GNU GCC 8.1.x_ и выше).
2. Система автоматизации сборки _CMake_ (версия _3.12.x_ и выше).
3. Интерпретатор _Python_ (версия _3.7.x_ и выше).
4. Рекомендуемый объем оперативной памяти - не менее 8 ГБ.
5. Свободное дисковое пространство объемом ~ 3 ГБ (набор данных для контрольных тестов).

## Сборка и запуск

#### Сборка проекта для Windows

Склонируйте проект к себе на устройство через [Git for Windows](https://gitforwindows.org/) (либо используйте
возможности IDE):

```shell
git clone https://github.com/Algorithms-and-Data-Structures-2021/semester-work-r-tree-aec
```

#### Генерация тестовых данных

Генерация тестового набора данных в формате [comma-seperated values (CSV)](https://en.wikipedia.org/wiki/Comma-separated_values).
Данные генерирует скрипт, написанный на языке Python (dataset/generate_csv_dataset.py).

В каждой строке через запятую перечисляются необходимые для операций данные: идентификационный номер, минимальная координата x, минимальная координата y,
максимальная координата x, максимальная координата y соответственно.

При запуске скрипта генерируется 10 папок, количество строк данных в файлах: 100, 500, 1000, 5000, 10000, 25000, 50000, 100000, 500000, 1000000.

#### Контрольные тесты (benchmarks)

Для тестирования мы создали файл (benchmark/insert_search_remove_benchmark.cpp), проводящий тесты по трем основным функциям R-дерева: вставка, поиск и удаление. Тестовые данные необходимо только для функции вставки; для остальных функций мы используем статичные данные (для оптимизации бенчмарков по времени).

### Список контрольных тестов

| Название             | Описание         | Метрики |
| :---                 |   ---:           |  ---:   |
| `insert_search_remove_benchmark`   | вставка, поиск и удаление объекта  | время   |

#### Инструкция по запуску контрольных тестов:

 Тестовые данные для вставки должны хранится в папке dataset/insert. Для остальных операций тестовые данные _не нужны_.
Контрольные тесты за один проход по циклу выдают в командную строку две строки формата:
"<n_of_serch_hits>\n
<time_for_insert>\t<time_for_search>\t<time_for_delete>"

Где n_of_search_hits - результат операции поиска.
Вторая строка - результаты контрольных тестов на тестовых данных для операции вставки, поиска и удаления соответственно.

## Источники

- https://clck.ru/UVNpq - статья на Википедии на русском
- https://en.wikipedia.org/wiki/R-tree -  статья на английском
- https://github.com/th-10/R-Tree-cpp - реализация R-дерева
- https://github.com/publicrepo/rtree - тоже реализация, с более детальными комментами
- https://www.youtube.com/watch?v=Jd8F2hVnGtQ&ab_channel=VlanAg - объяснение темы на английском языке
